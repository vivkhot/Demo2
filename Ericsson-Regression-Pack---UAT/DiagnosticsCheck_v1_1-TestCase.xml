<?xml version="1.0" encoding="UTF-8"?>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiagnosticsCheck_v1_1 TestCase" searchProperties="true" id="05659379-2082-4326-b068-f448ea4713b0" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="05659379-2082-4326-b068-f448ea4713b0fileName">DiagnosticsCheck_v1_1-TestCase</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="properties" name="" id="6e99598e-559a-4908-92de-e2cb19f9718e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties/></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="4f24f248-0ac2-4a0c-8389-94108f44b31c"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Excel"><con:configuration><file>//gbstafile01-1/home/SHARMAR/Xen/Documents/BIRegression_SOAPUI_Projects/Ericsson/Negative Testing Data.xls</file><worksheet>PreAuth</worksheet><cell>C2</cell><ignoreEmpty>true</ignoreEmpty><evaluateFormulas>false</evaluateFormulas></con:configuration></con:dataSource><con:property>RequestUserName</con:property><con:property>BupaPreAuthID</con:property><con:property>Version</con:property><con:property>BupaMemberId</con:property><con:property>OriginatingPartnerID</con:property><con:property>PartnersPreAuthReferenceNumber</con:property><con:property>Type</con:property><con:property>ContactName</con:property><con:property>TreatmentSummary</con:property><con:property>ProcedureDate</con:property><con:property>ConsultationtDate</con:property><con:property>CountryCode</con:property><con:property>BupaProviderID</con:property><con:property>PartnerReference</con:property><con:property>Name</con:property><con:property>Country Code</con:property><con:property>DoctorDetails</con:property><con:property>LenthOfStayRequested</con:property><con:property>LenthOfStayApproved</con:property><con:property>OnsetDate</con:property><con:property>AdmissionDate</con:property><con:property>DischargeDate</con:property><con:property>EstimatedCostOfTreatment</con:property><con:property>CurrencyCode</con:property><con:property>GeneralNotes</con:property><con:property>PrimaryDiagnosisCode</con:property><con:property>PrimaryDiagnosisDescription</con:property><con:property>PrimaryDiagnosis Standard</con:property><con:property>PrimaryProcedureCode</con:property><con:property>PrimaryProcedureDescription</con:property><con:property>PrimaryProcedureStandard</con:property><con:property>SecondaryProcedureCode</con:property><con:property>SecondaryProcedure Description</con:property><con:property>SecondaryProcedure Standard</con:property><con:property>OutPatientType</con:property><con:property>Status</con:property><con:property>RejectionReason</con:property><con:property>ContactMethod</con:property><con:property>ContactType</con:property><con:property>PayeeType</con:property><con:property>Username</con:property><con:property>Password</con:property><con:startRow>0</con:startRow><con:endRow>30</con:endRow><con:gotoLoopOnEmpty>false</con:gotoLoopOnEmpty><con:trimValues>false</con:trimValues><con:entitizeValues>false</con:entitizeValues><con:restartOnRun>false</con:restartOnRun><con:expandProperties>false</con:expandProperties></con:config></con:testStep><con:testStep type="request" name="DiagnosticsCheck_v1_1" id="79d45508-7b67-4d77-a8a2-c04dce39d172"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BasicHttpBinding_DiagnosticServiceInterface</con:interface><con:operation>DiagnosticsCheck_v1_1</con:operation><con:request name="DiagnosticsCheck_v1_1" id="d384baaa-52a5-468b-9412-e7615f4be946"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://systest2-partners.services-api.bupa-intl.com/BupaPartnerGateway.svc</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="urn://com.bupa.bi.applications.swan.DiagnosticsCheck_v1_1">
    <soapenv:Header>
       <tpa_organization>Test</tpa_organization>
       <tpa_password>LZ2xO9kHZwHnBXH8t9FS2xXKZXaVwt+qhndERot9+DI=</tpa_password>
     </soapenv:Header>

   <soapenv:Body>
      <com:DiagnosticsCheckRequest>
         <!--Optional:-->
         
      <com:MessageID>1</com:MessageID></com:DiagnosticsCheckRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Simple NotContains" id="3bbe3f90-2404-407c-a601-bfde89cab012" name="Not Contains"><con:configuration><token>FAULT</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="http://bupa.com/DiagnosticService:diagnosticsCheck_v1_1In" mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/><con:environmentSpec><con:entry environmentId="ffa02281-abee-4d92-9d74-c677c51cd899"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="da7c9196-ba3b-41d0-a66d-0a23ca4256ba"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="2e2d3644-d234-40cc-bc7a-aa84e98bab33"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="abef8391-6af3-433a-b3bb-9504a88cd8e9"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="6f08d644-a5bc-4490-920b-48a60b2d8e41"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="64e0791f-4ed5-4997-966c-88e83c52740b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="6f2ca154-2593-4d31-9605-d7f796e04a87"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="5650c0e1-78a8-46fa-87b8-a891fcd675df"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="43d00641-0327-48c2-8143-b4a8c3cc7a15"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="d569c580-5769-4daf-af9e-5bf59356fdbc"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="838914ec-42f6-42ce-a432-f18913224d4a"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="4b1f3791-ec46-47c9-a61d-2dad2d67e563"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="ea7ba891-5369-4d68-be76-ff738b357a8d"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="d32ca7f9-7f15-406a-b283-82aea268796e"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="472fc935-ce99-435f-a108-237792822ece"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="1693b6ef-728c-4bd3-98f6-b40edae1b2a0"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:request></con:config></con:testStep><con:testStep type="transfer" name="Load Response Property" id="85a91f6c-11bf-4cc3-bdaa-a0122d97f9f3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>responsetransfer</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>DiagnosticsCheck_v1_1</con:sourceStep><con:sourcePath/><con:targetType>response</con:targetType><con:targetStep>Response Property</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="Response Property" id="989206db-b5e1-4b22-89df-e074c6a6c58e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>response</con:name><con:value><![CDATA[<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <DiagnosticsCheckResponse xmlns="urn://com.bupa.bi.applications.swan.DiagnosticsCheck_v1_1" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
         <Passed>true</Passed>
         <IdentityType>Anonymous</IdentityType>
         <Checks>
            <DiagnosticChecks>
               <TestName>Query for invalid member</TestName>
               <TestResult>true</TestResult>
               <Description>Creates a connection to the database and queries for data</Description>
               <TestDurationMS>208</TestDurationMS>
               <SchemaVersion>3.5.0.12</SchemaVersion>
               <SoftwareVersion>3.5.0.115</SoftwareVersion>
            </DiagnosticChecks>
         </Checks>
         <AdditionalInfo i:nil="true"/>
      </DiagnosticsCheckResponse>
   </s:Body>
</s:Envelope>]]></con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Extract variables from Response XML" id="fa62ac7f-5743-4a71-981d-18ebb0f8423f"><con:settings/><con:config><script>import groovy.xml.*


def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder("Response Property#response")
def successfulSchemaVersion = context.expand( '${Response Property#response#declare namespace ns1=\'urn://com.bupa.bi.applications.swan.DiagnosticsCheck_v1_1\'; //ns1:DiagnosticsCheckResponse[1]/ns1:Checks[1]/ns1:DiagnosticChecks[1]/ns1:SchemaVersion[1]}' )
def successfulSoftwareVesrion = context.expand( '${Response Property#response#declare namespace ns1=\'urn://com.bupa.bi.applications.swan.DiagnosticsCheck_v1_1\'; //ns1:DiagnosticsCheckResponse[1]/ns1:Checks[1]/ns1:DiagnosticChecks[1]/ns1:SoftwareVersion[1]}' )
def successfulGetwaySchemaVesrion = context.expand( '${Response Property#response#declare namespace ns1=\'urn://com.bupa.bi.applications.swan.DiagnosticsCheck_v1_1\'; //ns1:DiagnosticsCheckResponse[1]/ns1:Checks[1]/ns1:DiagnosticChecks[2]/ns1:SchemaVersion[1]}' )
def successfulGetwaySoftwareVesrion = context.expand( '${Response Property#response#declare namespace ns1=\'urn://com.bupa.bi.applications.swan.DiagnosticsCheck_v1_1\'; //ns1:DiagnosticsCheckResponse[1]/ns1:Checks[1]/ns1:DiagnosticChecks[2]/ns1:SoftwareVersion[1]}' )
if(successfulSchemaVersion!=null)
{
	testRunner.testCase.setPropertyValue("responsemsg",successfulSchemaVersion)
	testRunner.testCase.setPropertyValue("responsemsg2",successfulSoftwareVesrion)
	testRunner.testCase.setPropertyValue("responsemsg3",successfulGetwaySchemaVesrion)
	testRunner.testCase.setPropertyValue("responsemsg4",successfulGetwaySoftwareVesrion)	
	testRunner.testCase.setPropertyValue("success","yes")
}
if(holder.getNodeValue('//faultstring')!=null)
{
	testRunner.testCase.setPropertyValue("responsemsg",holder.getNodeValue('//faultstring'))
	testRunner.testCase.setPropertyValue("success","no")
}

//log.info holder.getNodeValue('/*/*/*/*[1]')
//log.info holder.getNodeValue(' //ns1:SubmitPreAuthResponse[1]/ns1:BupaPreAuthId[1]')</script></con:config></con:testStep><con:testStep type="datasink" name="Export to excel" id="edfbf7a9-9b5d-4b82-91c0-5a89f8f3a557"><con:settings/><con:config xsi:type="con:DataSinkStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSink type="Excel"><con:configuration><file>//gbstafile01-1/home/SHARMAR/Xen/Documents/BIRegression_SOAPUI_Projects/Ericsson/Output file.xlsx</file><outfile>//gbstafile01-1/home/SHARMAR/Xen/Documents/BIRegression_SOAPUI_Projects/Ericsson/test.xls</outfile><worksheet>Version</worksheet><cell>A2</cell><evaluateFormulas>false</evaluateFormulas><append>false</append></con:configuration></con:dataSink><con:properties><con:property><con:name>SchemaVersion</con:name><con:value>${#TestCase#responsemsg}</con:value></con:property><con:property><con:name>SoftwareVesrion</con:name><con:value>${#TestCase#responsemsg2}</con:value></con:property><con:property><con:name>GetwaySchemaVesrion</con:name><con:value>${#TestCase#responsemsg3}</con:value></con:property><con:property><con:name>GetwaySoftwareVesrion</con:name><con:value>${#TestCase#responsemsg4}</con:value></con:property><con:property><con:name>Success</con:name><con:value>${#TestCase#success}</con:value></con:property></con:properties></con:config></con:testStep><con:properties><con:property><con:name>responsemsg</con:name><con:value>3.5.0.12</con:value></con:property><con:property><con:name>responsemsg2</con:name><con:value>3.5.0.115</con:value></con:property><con:property><con:name>responsemsg3</con:name><con:value/></con:property><con:property><con:name>responsemsg4</con:name><con:value/></con:property><con:property><con:name>success</con:name><con:value>yes</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>0e4942f6-c31a-45db-8a56-795f99d326b9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6e99598e-559a-4908-92de-e2cb19f9718e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4f24f248-0ac2-4a0c-8389-94108f44b31c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>79d45508-7b67-4d77-a8a2-c04dce39d172</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>85a91f6c-11bf-4cc3-bdaa-a0122d97f9f3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>989206db-b5e1-4b22-89df-e074c6a6c58e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fa62ac7f-5743-4a71-981d-18ebb0f8423f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>edfbf7a9-9b5d-4b82-91c0-5a89f8f3a557</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:environmentSpec><con:entry environmentId="ffa02281-abee-4d92-9d74-c677c51cd899"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="da7c9196-ba3b-41d0-a66d-0a23ca4256ba"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="2e2d3644-d234-40cc-bc7a-aa84e98bab33"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="abef8391-6af3-433a-b3bb-9504a88cd8e9"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="6f08d644-a5bc-4490-920b-48a60b2d8e41"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="64e0791f-4ed5-4997-966c-88e83c52740b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="6f2ca154-2593-4d31-9605-d7f796e04a87"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="5650c0e1-78a8-46fa-87b8-a891fcd675df"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="43d00641-0327-48c2-8143-b4a8c3cc7a15"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="d569c580-5769-4daf-af9e-5bf59356fdbc"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="838914ec-42f6-42ce-a432-f18913224d4a"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="4b1f3791-ec46-47c9-a61d-2dad2d67e563"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="ea7ba891-5369-4d68-be76-ff738b357a8d"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="d32ca7f9-7f15-406a-b283-82aea268796e"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="472fc935-ce99-435f-a108-237792822ece"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="1693b6ef-728c-4bd3-98f6-b40edae1b2a0"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:testCase>
